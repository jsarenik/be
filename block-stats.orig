<!-- options keys:--><!-- 		- blockHeightsByTxid--><!-- 		- sharedBlockHeight (int)--><!-- 		- showDates (true|false)--><!-- 		- highlightAddress (address)--><!-- 		- addrGainsByTxid (map)--><!-- 		- addrLossesByTxid (map)--><!-- 		- mempoolDetailsByTxid (map)--><!-- txBlockHeightsByTxid_orSharedBlockHeight, showDates=false, highlightAddress, addrGainsByTxid, addrLossesByTxid)--><!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="/"><meta name="csrf-token" content="INLc9egT-dn4fpgO9pwOI3CgSKv52URAWjLc"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0, shrink-to-fit=no"><meta name="description" content="Open-source, easy-to-use, educational Bitcoin explorer whose only dependency is your Bitcoin Core node."><link rel="stylesheet" href="./style/highlight.min.css?v=2023-06-14-1dbd3d8fc2" integrity="sha384-s4RLYRjGGbVqKOyMGGwfxUTMOO6D7r2eom7hWZQ6BjK2Df4ZyfzLXEkonSm0KLIQ" crossorigin="anonymous"><link id="dark-v1-theme-link-tag" href="./style/dark-v1.min.css?v=2023-06-14-1dbd3d8fc2" integrity="sha384-N4vpIzX+w8OiVt/PRWfSTxIBA/r/2wp/9H3d3Qxmb/6woHCt9/HZQl9Nc3XByIqU" crossorigin="anonymous"/><link id="light-theme-link-tag" href="./style/light.min.css?v=2023-06-14-1dbd3d8fc2" integrity="sha384-oFtx78mBk7Y/IOR4rl1Ij5Wf3/5FnXjwqcmvYpdvI/piekQkeaq72KSZjWUc3Uaw" crossorigin="anonymous"/><link id="dark-theme-link-tag" rel="stylesheet" href="./style/dark.min.css?v=2023-06-14-1dbd3d8fc2" integrity="sha384-CZz6XiKcNpqio2wvNlCOZ/wEbjjS0Z7W7+zn6bzl5kfs5VS9nFi/jzIAxIobXrtg" crossorigin="anonymous"/><style>@font-face {
	font-family: "bootstrap-icons";

	src:	url("./font/bootstrap-icons.woff2?v=2023-06-14-1dbd3d8fc2") format("woff2"),
			url("./font/bootstrap-icons.woff?v=2023-06-14-1dbd3d8fc2") format("woff");
}
</style><link rel="stylesheet" href="./style/bootstrap-icons.css?v=2023-06-14-1dbd3d8fc2" integrity="sha384-rJFhkIguED0Z4GX6r6ReHpTCkwWtiPHZnQtWVP0DQWcKHzeJAlYb1m/xdYkeEk+f" crossorigin="anonymous"/><link id="canonical" rel="canonical" href="https://bitcoinexplorer.org"><meta property="og:title" content="BitcoinExplorer.org - Open-Source Bitcoin Explorer"><meta property="og:description" content="Open-source, easy-to-use, educational Bitcoin explorer whose only dependency is your Bitcoin Core node."><meta property="og:image" content="https://bitcoinexplorer.org/img/preview.png"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@BitcoinExplorer"><meta property="twitter:creator" content="@BitcoinExplorer"><meta property="twitter:title" content="BitcoinExplorer.org"><meta property="twitter:description" content="Open-source, easy-to-use, educational Bitcoin explorer whose only dependency is your Bitcoin Core node."><meta property="twitter:image:src" content="https://bitcoinexplorer.org/img/preview.png"><meta property="twitter:domain" content="bitcoinexplorer.org"><link rel="apple-touch-icon" sizes="180x180" href="./img/network-mainnet/apple-touch-icon.png?v=2023-06-14-1dbd3d8fc2"><link rel="icon" type="image/png" sizes="32x32" href="./img/network-mainnet/favicon-32x32.png?v=2023-06-14-1dbd3d8fc2"><link rel="icon" type="image/png" sizes="16x16" href="./img/network-mainnet/favicon-16x16.png?v=2023-06-14-1dbd3d8fc2"><link rel="manifest" href="./img/network-mainnet/site.webmanifest"><link rel="mask-icon" href="./img/network-mainnet/safari-pinned-tab.svg" color="#f7931a"><link rel="shortcut icon" href="./img/network-mainnet/favicon.ico?v=2023-06-14-1dbd3d8fc2"><meta name="apple-mobile-web-app-title" content="BTC Explorer"><meta name="application-name" content="BTC Explorer"><meta name="msapplication-TileColor" content="#022e70"><meta name="msapplication-config" content="./img/network-mainnet/browserconfig.xml"><meta name="theme-color" content="#022e70"><!-- debug as if we're in privacy mode (which means we don't have exchange rate data)--><!-- debug as if we're in performance protection mode (which means we don't calculate UTXO set details)--><!-- debug as if we don't have result.blockstats (applies to block pages when node version < 0.17.0)--><!--if (result)--><!--	- result.blockstats = null;--><!-- no networkVolume--><title>Block Stats</title></head><body class="bg-header-footer"><nav class="navbar navbar-expand-md navbar-dark bg-header-footer"><div class="container"><a class="navbar-brand" href="./"><span><img class="header-image" src="./img/network-mainnet/logo.svg?v=2023-06-14-1dbd3d8fc2" alt="logo"><span class="fw-light">Bitcoin</span></span></a><button class="navbar-toggler navbar-toggler-end" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-label="collapse navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNav"><ul class="navbar-nav me-auto"></ul><ul class="navbar-nav"><li class="nav-item dropdown me-0 me-md-2 mt-2 mt-md-0 text-center text-md-start"><a class="nav-link rounded bg-header-footer-highlight text-white dropdown-toggle" href="javascript:void(0)" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="bi-tools me-2 ms-1"></i></a><div class="dropdown-menu dropdown-menu-end shadow" aria-label="Tools Items"><span class="dropdown-header">Basics</span><a class="dropdown-item" href="./node-details"><i class="bi-info-circle" style="width: 20px; margin-right: 10px;"></i><span> Node Details</span></a><a class="dropdown-item" href="./blocks"><i class="bi-boxes" style="width: 20px; margin-right: 10px;"></i><span> Browse Blocks</span></a><hr class="dropdown-divider mt-2 mb-1"><span class="dropdown-header">Mempool</span><a class="dropdown-item" href="./mempool-summary"><i class="bi-hourglass-split" style="width: 20px; margin-right: 10px;"></i><span> Mempool Summary</span></a><a class="dropdown-item" href="./next-block"><i class="bi-minecart-loaded" style="width: 20px; margin-right: 10px;"></i><span> Next Block</span></a><a class="dropdown-item" href="./mempool-transactions"><i class="bi-book" style="width: 20px; margin-right: 10px;"></i><span> Browse Mempool</span></a><hr class="dropdown-divider mt-2 mb-1"><span class="dropdown-header">Analysis</span><a class="dropdown-item" href="./mining-summary"><i class="bi-hammer" style="width: 20px; margin-right: 10px;"></i><span> Mining Summary</span></a><a class="dropdown-item" href="./utxo-set"><i class="bi-list-columns" style="width: 20px; margin-right: 10px;"></i><span> UTXO Set</span></a><a class="dropdown-item" href="./block-stats"><i class="bi-stack" style="width: 20px; margin-right: 10px;"></i><span> Block Stats</span></a><a class="dropdown-item" href="./block-analysis"><i class="bi-chevron-double-down" style="width: 20px; margin-right: 10px;"></i><span> Block Analysis</span></a><a class="dropdown-item" href="./difficulty-history"><i class="bi-clock-history" style="width: 20px; margin-right: 10px;"></i><span> Difficulty History</span></a><a class="dropdown-item" href="./tx-stats"><i class="bi-graph-up" style="width: 20px; margin-right: 10px;"></i><span> Transaction Stats</span></a><a class="dropdown-item" href="./next-halving"><i class="bi-square-half" style="width: 20px; margin-right: 10px;"></i><span> Next Halving</span></a><hr class="dropdown-divider mt-2 mb-1"><span class="dropdown-header">Technical</span><a class="dropdown-item" href="./api/docs"><i class="bi-braces-asterisk" style="width: 20px; margin-right: 10px;"></i><span> API</span></a><a class="dropdown-item" href="./rpc-browser"><i class="bi-journal-text" style="width: 20px; margin-right: 10px;"></i><span> RPC Browser</span></a><a class="dropdown-item" href="./rpc-terminal"><i class="bi-terminal" style="width: 20px; margin-right: 10px;"></i><span> RPC Terminal</span></a><a class="dropdown-item" href="./peers"><i class="bi-diagram-3" style="width: 20px; margin-right: 10px;"></i><span> Peers</span></a><hr class="dropdown-divider mt-2 mb-1"><span class="dropdown-header">Fun</span><a class="dropdown-item" href="./fun"><i class="bi-flag" style="width: 20px; margin-right: 10px;"></i><span> Bitcoin Fun</span></a><a class="dropdown-item" href="./quotes"><i class="bi-chat-quote" style="width: 20px; margin-right: 10px;"></i><span> Quotes</span></a><a class="dropdown-item" href="./holidays"><i class="bi-calendar-heart" style="width: 20px; margin-right: 10px;"></i><span> Holidays</span></a><a class="dropdown-item" href="./bitcoin-whitepaper"><i class="bi-file-earmark-text" style="width: 20px; margin-right: 10px;"></i><span> Whitepaper Extractor</span></a></div></li><li class="nav-item dropdown me-0 me-md-3 mt-2 mt-md-0 text-center text-md-start"><a class="nav-link rounded bg-header-footer-highlight text-white dropdown-toggle" href="javascript:void(0)" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="bi-gear me-2 ms-1"></i></a><div class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="navbarDropdown"><span class="dropdown-header">Display Currency</span><div class="btn-group ms-3"><span class="btn btn-primary btn-sm">BTC</span><a class="btn btn-outline-primary btn-sm" href="./changeSetting?name=displayCurrency&amp;value=sat">sat</a></div><hr class="dropdown-divider mt-2 mb-2"><span class="dropdown-header">Theme</span><div class="btn-group ms-3"><a class="btn btn-sm px-3 btn-outline-primary" id="theme-toggler-light" href="javascript:void(0);" onclick="activateTheme('light'); return false;"><i class="bi-sun-fill text-warning"></i></a><a class="btn btn-sm px-3 btn-primary" id="theme-toggler-dark" href="javascript:void(0);" onclick="activateTheme('dark'); return false;"><i class="bi-moon-fill"></i></a><a class="btn btn-sm px-3 btn-outline-primary" id="theme-toggler-dark-v1" href="javascript:void(0);" onclick="activateTheme('dark-v1'); return false;"><i class="bi-moon"></i></a></div><hr class="dropdown-divider mt-2 mb-2"><span class="dropdown-header">Display Timezone</span><div class="btn-group ms-3"><a class="btn btn-sm px-3 btn-primary" href="./changeSetting?name=uiTimezone&amp;value=utc">UTC</a><a class="btn btn-sm px-3 btn-outline-primary" href="./changeSetting?name=uiTimezone&amp;value=local">Local</a></div><p class="px-3 pt-2 small text-muted">"Local" uses your browser's default offset:<span class="badge bg-light text-dark ms-1 border" id="browser-tz-offset"></span><i class="bi-info-circle ms-1" title="This value comes from your brower. If you wish to set a custom offset, you can do so below, in 'More settings...'" data-bs-toggle="tooltip"></i></p><hr class="dropdown-divider mt-2 mb-2"><a class="dropdown-item" href="./user-settings">More settings...</a><a class="dropdown-item" href="./admin/dashboard">Admin Dashboard</a></div></li></ul></div><form class="form-inline d-none d-lg-inline" method="post" action="./search" style="width: 325px;" autocomplete="off"><input type="hidden" name="_csrf" value="INLc9egT-dn4fpgO9pwOI3CgSKv52URAWjLc"><div class="input-group"><input class="form-control" type="text" name="query" placeholder="block height/hash, txid, address" autocorrect="off" autocapitalize="off" tabindex="1"><button class="btn btn-primary" type="submit" aria-label="Search"><i class="bi-search"></i></button></div></form><form class="form-inline d-lg-none w-100 mt-2 mt-md-0" method="post" action="./search"><input type="hidden" name="_csrf" value="INLc9egT-dn4fpgO9pwOI3CgSKv52URAWjLc"><div class="input-group"><input class="form-control" type="text" name="query" placeholder="height/hash/txid..."><button class="btn btn-primary" type="submit" aria-label="Search"><i class="bi-search"></i></button></div></form></div></nav><div class="pb-4 pt-3 pt-md-4 bg-main"><div class="container px-2 px-sm-3 mb-large"><div style="min-height: 500px;"><div class="d-flex justify-content-between"><h1 class="fw-light word-wrap mb-1">Block Stats</h1></div><h4 class="fw-light word-wrap mb-4"></h4><!--hr.mb-3--><div class="alert alert-primary alert-dismissible shadow-sm mb-4 ps-3 ps-md-7" role="alert"><i class="d-none d-md-inline bi-info-circle fs-5 d-inline-block" style="position: absolute; top: 0; left: 0; width: 36px; margin-left: 0.75rem; margin-top: 1.0rem;"></i><p>The <strong>Block Stats</strong> tool queries a range of blocks from Bitcoin Core and summarizes the data via graphs. These graphs sometimes expose interesting trends and sometimes show boring, steady-state operation of the network.</p>

Use the <b>Filters</b> section below to select the range of blocks to analyze and select the subset of graphs displayed.<a class="btn-close" href="./changeSetting?name=blockStatsPageNoteDismissed&amp;value=true" aria-label="Close" style="text-decoration: none;" title="Hide this note" data-bs-toggle="tooltip"></a><!--button.btn-close.text-muted(type="button", data-bs-dismiss="alert", aria-label="Close", title="Hide this note", data-bs-toggle="tooltip")--></div><h3 class="h5 mb-1 fw-light d-block">Filters</h3><div class="mb-section"><div class="card mb-section shadow-sm"><div class="card-body"><div class="mb-3"><div class="clearfix"><div class="float-start me-4"><div id="time-range-buttons"><div class="mb-2"><span class="border-dotted text-uppercase fw-light text-card-highlight" title="Analyze blocks over the last N days (approximated using average block time)." data-bs-toggle="tooltip">Time Range</span></div><div class="btn-group"><a class="btn btn-primary block-count-btn" href="javascript:void(0)" data-blockCount="144">1 day</a><a class="btn btn-outline-primary block-count-btn" href="javascript:void(0)" data-blockCount="432">3 day</a><a class="btn btn-outline-primary block-count-btn" href="javascript:void(0)" data-blockCount="1008">7 day</a><a class="btn btn-outline-primary block-count-btn" href="javascript:void(0)" data-blockCount="4320">30 day</a></div></div></div><div class="float-start me-4"><div id="block-selections-buttons"><div class="mb-2"><span class="border-dotted text-uppercase fw-light text-card-highlight" title="Choose from a list of pre-configured 'interesting' historical block ranges." data-bs-toggle="tooltip">Interesting History</span></div><div class="dropdown"><button class="btn btn-outline-primary dropdown-toggle" type="button" id="preconfigured-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Selections</button><div class="dropdown-menu" aria-labelledby="preconfigured-dropdown"><a class="dropdown-item" href="javascript:void(0)" data-blocks="0-199">First 200 Blocks</a><a class="dropdown-item" href="javascript:void(0)" data-blocks="209900-210100">First Halving ±100</a><a class="dropdown-item" href="javascript:void(0)" data-blocks="419900-420100">Second Halving ±100</a><a class="dropdown-item" href="javascript:void(0)" data-blocks="629900-630100">Third Halving ±100</a><a class="dropdown-item" href="javascript:void(0)" data-blocks="481724-481924">SegWit Activation ±100</a></div></div></div></div><div class="float-start"><div id="time-range-buttons"><div class="mb-2"><span class="border-dotted text-uppercase fw-light text-card-highlight" title="Manually enter a range of blocks to analyze." data-bs-toggle="tooltip">Custom Block Range</span></div><form class="form-inline me-3" id="custom-range-form"><div class="input-group"><input class="form-control" type="text" id="custom-range-start" placeholder="min height" style="width: 125px;"/><input class="form-control" type="text" id="custom-range-end" placeholder="max height" style="width: 125px;"/><button class="btn btn-primary" type="submit">Go</button></div></form></div></div></div></div><hr><div class="mb-2"><span class="border-dotted text-card-highlight text-uppercase fw-light" title="Select the list of graphs to be displayed." data-bs-toggle="tooltip">Active Graphs</span></div><div class="clearfix"><div class="float-start me-3 mb-1"><div class="form-check"><input class="form-check-input graph-toggle-checkbox" type="checkbox" id="checkbox-fee-rates" checked="checked" data-graphId="fee-rates" autocomplete="off"><label class="form-check-label" for="checkbox-fee-rates">Fee Rates (avg, median, min)</label></div></div><div class="float-start me-3 mb-1"><div class="form-check"><input class="form-check-input graph-toggle-checkbox" type="checkbox" id="checkbox-max-fee-rates" checked="checked" data-graphId="max-fee-rates" autocomplete="off"><label class="form-check-label" for="checkbox-max-fee-rates">Maximum Fee Rate</label></div></div><div class="float-start me-3 mb-1"><div class="form-check"><input class="form-check-input graph-toggle-checkbox" type="checkbox" id="checkbox-total-fee" checked="checked" data-graphId="total-fee" autocomplete="off"><label class="form-check-label" for="checkbox-total-fee">Total Fees</label></div></div><div class="float-start me-3 mb-1"><div class="form-check"><input class="form-check-input graph-toggle-checkbox" type="checkbox" id="checkbox-min-fees" checked="checked" data-graphId="min-fees" autocomplete="off"><label class="form-check-label" for="checkbox-min-fees">Minimum Tx Fee</label></div></div><div class="float-start me-3 mb-1"><div class="form-check"><input class="form-check-input graph-toggle-checkbox" type="checkbox" id="checkbox-max-fees" checked="checked" data-graphId="max-fees" autocomplete="off"><label class="form-check-label" for="checkbox-max-fees">Maximum Tx Fee</label></div></div><div class="float-start me-3 mb-1"><div class="form-check"><input class="form-check-input graph-toggle-checkbox" type="checkbox" id="checkbox-inputs-outputs" checked="checked" data-graphId="inputs-outputs" autocomplete="off"><label class="form-check-label" for="checkbox-inputs-outputs">Input / Output Count</label></div></div><div class="float-start me-3 mb-1"><div class="form-check"><input class="form-check-input graph-toggle-checkbox" type="checkbox" id="checkbox-tx-sizes" checked="checked" data-graphId="tx-sizes" autocomplete="off"><label class="form-check-label" for="checkbox-tx-sizes">Tx Sizes (avg, median, min)</label></div></div><div class="float-start me-3 mb-1"><div class="form-check"><input class="form-check-input graph-toggle-checkbox" type="checkbox" id="checkbox-max-tx-sizes" checked="checked" data-graphId="max-tx-sizes" autocomplete="off"><label class="form-check-label" for="checkbox-max-tx-sizes">Maximum Tx Size</label></div></div><div class="float-start me-3 mb-1"><div class="form-check"><input class="form-check-input graph-toggle-checkbox" type="checkbox" id="checkbox-volumes" checked="checked" data-graphId="volumes" autocomplete="off"><label class="form-check-label" for="checkbox-volumes">Output Volume</label></div></div><div class="float-start me-3 mb-1"><div class="form-check"><input class="form-check-input graph-toggle-checkbox" type="checkbox" id="checkbox-weights-sizes" checked="checked" data-graphId="weights-sizes" autocomplete="off"><label class="form-check-label" for="checkbox-weights-sizes">Block Weight and Size</label></div></div><div class="float-start me-3 mb-1"><div class="form-check"><input class="form-check-input graph-toggle-checkbox" type="checkbox" id="checkbox-sw-txs" checked="checked" data-graphId="sw-txs" autocomplete="off"><label class="form-check-label" for="checkbox-sw-txs">SegWit Tx Count</label></div></div><div class="float-start me-3 mb-1"><div class="form-check"><input class="form-check-input graph-toggle-checkbox" type="checkbox" id="checkbox-subsidy" checked="checked" data-graphId="subsidy" autocomplete="off"><label class="form-check-label" for="checkbox-subsidy">Subsidy</label></div></div><div class="float-start me-3 mb-1"><div class="form-check"><input class="form-check-input graph-toggle-checkbox" type="checkbox" id="checkbox-mediantime" checked="checked" data-graphId="mediantime" autocomplete="off"><label class="form-check-label" for="checkbox-mediantime">Timestamp</label></div></div><div class="float-start me-3 mb-1"><div class="form-check"><input class="form-check-input graph-toggle-checkbox" type="checkbox" id="checkbox-txs" checked="checked" data-graphId="txs" autocomplete="off"><label class="form-check-label" for="checkbox-txs">Tx Count</label></div></div><div class="float-start me-3 mb-1"><div class="form-check"><input class="form-check-input graph-toggle-checkbox" type="checkbox" id="checkbox-utxo_increase" checked="checked" data-graphId="utxo_increase" autocomplete="off"><label class="form-check-label" for="checkbox-utxo_increase">UTXO Δ</label></div></div><div class="float-start me-3 mb-1"><a class="me-3" id="link-show-all" href="javascript:void(0)">show all</a><a id="link-hide-all" href="javascript:void(0)">hide all</a></div></div></div></div></div><div class="mb-huge" id="progress-wrapper"><div class="card shadow-sm mb-3"><div class="card-body"><span>Loading blocks: <span id="block-progress-text"></span></span><div class="progress mt-2" id="progress-bar" style="height: 7px;"><div class="progress-bar" id="data-progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div></div></div></div></div><div id="main-content" style="display: none;"><div class="row clearfix"><div class="col-lg-6 float-start"><div class="graph-wrapper" id="graph-wrapper-fee-rates"><h3 class="h5 mb-1 fw-light d-block">Fee Rates (avg, median, min)</h3><div class="card shadow-sm mb-3"><div class="card-body"><canvas class="mb-3" id="fee-rates"></canvas></div></div></div></div><div class="col-lg-6 float-start"><div class="graph-wrapper" id="graph-wrapper-max-fee-rates"><h3 class="h5 mb-1 fw-light d-block">Maximum Fee Rate</h3><div class="card shadow-sm mb-3"><div class="card-body"><canvas class="mb-3" id="max-fee-rates"></canvas></div></div></div></div><div class="col-lg-6 float-start"><div class="graph-wrapper" id="graph-wrapper-total-fee"><h3 class="h5 mb-1 fw-light d-block">Total Fees</h3><div class="card shadow-sm mb-3"><div class="card-body"><canvas class="mb-3" id="total-fee"></canvas></div></div></div></div><div class="col-lg-6 float-start"><div class="graph-wrapper" id="graph-wrapper-min-fees"><h3 class="h5 mb-1 fw-light d-block">Minimum Tx Fee</h3><div class="card shadow-sm mb-3"><div class="card-body"><canvas class="mb-3" id="min-fees"></canvas></div></div></div></div><div class="col-lg-6 float-start"><div class="graph-wrapper" id="graph-wrapper-max-fees"><h3 class="h5 mb-1 fw-light d-block">Maximum Tx Fee</h3><div class="card shadow-sm mb-3"><div class="card-body"><canvas class="mb-3" id="max-fees"></canvas></div></div></div></div><div class="col-lg-6 float-start"><div class="graph-wrapper" id="graph-wrapper-inputs-outputs"><h3 class="h5 mb-1 fw-light d-block">Input / Output Count</h3><div class="card shadow-sm mb-3"><div class="card-body"><canvas class="mb-3" id="inputs-outputs"></canvas></div></div></div></div><div class="col-lg-6 float-start"><div class="graph-wrapper" id="graph-wrapper-tx-sizes"><h3 class="h5 mb-1 fw-light d-block">Tx Sizes (avg, median, min)</h3><div class="card shadow-sm mb-3"><div class="card-body"><canvas class="mb-3" id="tx-sizes"></canvas></div></div></div></div><div class="col-lg-6 float-start"><div class="graph-wrapper" id="graph-wrapper-max-tx-sizes"><h3 class="h5 mb-1 fw-light d-block">Maximum Tx Size</h3><div class="card shadow-sm mb-3"><div class="card-body"><canvas class="mb-3" id="max-tx-sizes"></canvas></div></div></div></div><div class="col-lg-6 float-start"><div class="graph-wrapper" id="graph-wrapper-volumes"><h3 class="h5 mb-1 fw-light d-block">Output Volume</h3><div class="card shadow-sm mb-3"><div class="card-body"><canvas class="mb-3" id="volumes"></canvas></div></div></div></div><div class="col-lg-6 float-start"><div class="graph-wrapper" id="graph-wrapper-weights-sizes"><h3 class="h5 mb-1 fw-light d-block">Block Weight and Size</h3><div class="card shadow-sm mb-3"><div class="card-body"><canvas class="mb-3" id="weights-sizes"></canvas></div></div></div></div><div class="col-lg-6 float-start"><div class="graph-wrapper" id="graph-wrapper-sw-txs"><h3 class="h5 mb-1 fw-light d-block">SegWit Tx Count</h3><div class="card shadow-sm mb-3"><div class="card-body"><canvas class="mb-3" id="sw-txs"></canvas></div></div></div></div><div class="col-lg-6 float-start"><div class="graph-wrapper" id="graph-wrapper-subsidy"><h3 class="h5 mb-1 fw-light d-block">Subsidy</h3><div class="card shadow-sm mb-3"><div class="card-body"><canvas class="mb-3" id="subsidy"></canvas></div></div></div></div><div class="col-lg-6 float-start"><div class="graph-wrapper" id="graph-wrapper-mediantime"><h3 class="h5 mb-1 fw-light d-block">Timestamp</h3><div class="card shadow-sm mb-3"><div class="card-body"><canvas class="mb-3" id="mediantime"></canvas></div></div></div></div><div class="col-lg-6 float-start"><div class="graph-wrapper" id="graph-wrapper-txs"><h3 class="h5 mb-1 fw-light d-block">Tx Count</h3><div class="card shadow-sm mb-3"><div class="card-body"><canvas class="mb-3" id="txs"></canvas></div></div></div></div><div class="col-lg-6 float-start"><div class="graph-wrapper" id="graph-wrapper-utxo_increase"><h3 class="h5 mb-1 fw-light d-block">UTXO Δ</h3><div class="card shadow-sm mb-3"><div class="card-body"><canvas class="mb-3" id="utxo_increase"></canvas></div></div></div></div></div></div></div><div style="margin-bottom: 30px;"></div></div></div><footer class="footer border-top border-primary bg-header-footer pt-3 pb-1 px-3 text-white" style="border-width: 5px !important;"><div class="container"><div class="mb-4 mx-6"><iframe id="quoteIframe" title="A Bitcoin Quote of the Day" src="./snippet/quote/random" onload="iframeLoaded('quoteIframe');" scrolling="no" height="0" style="width: 100%;"></iframe></div><hr><div class="row mt-4 mb-6"><div class="col-lg-3"><div class="mb-4"><h6>Project</h6><div class="ms-2"><a class="footer-link" href="https://github.com/janoside/btc-rpc-explorer">github.com/janoside/btc-rpc-explorer</a><div class="mt-2"><a class="btn btn-primary btn-sm me-3 mb-1 text-decoration-none" href="https://github.com/janoside/btc-rpc-explorer"><i class="bi-star-fill text-warning me-2"></i><span class="badge bg-white text-dark">1317</span></a><a class="btn btn-primary btn-sm me-3 mb-1 text-decoration-none" href="https://github.com/janoside/btc-rpc-explorer/fork"><i class="bi-bezier2 me-2"></i><span class="badge bg-white text-dark">1070</span></a></div></div></div></div><div class="col-lg-3"><div class="mb-4"><h6>App Details</h6><div class="ms-2"><span>version: 3.4.0</span><br><span>commit: <a class="footer-link" href="https://github.com/janoside/btc-rpc-explorer/commit/1dbd3d8fc2">1dbd3d8fc2</a></span><br><span>released: 2023-06-14</span><span style="font-size: 0.9em;"> (<a class="footer-link" href="./changelog">changelog</a><span>)</span></span></div></div></div><div class="col-lg-3"><div class="mb-4"><h6>Public Demos</h6><div class="ms-2"><a class="footer-link" href="https://be.anyone.eu.org">https://be.anyone.eu.org</a><br><a class="footer-link" href="http://btcexpz7xlwrqknqw6p3bok6shf73qtkd6zxct4x4qta2ktvh7ntprad.onion" title="Tor v3 Hidden Service" data-bs-toggle="tooltip">btcexp….onion</a><span class="ms-1">(tor v3)</span><small class="ms-2"><a href="javascript:void(0)" title="Copy" data-clipboard-text="http://btcexpz7xlwrqknqw6p3bok6shf73qtkd6zxct4x4qta2ktvh7ntprad.onion" data-bs-toggle="tooltip" onclick="copyTextToClipboard(&quot;http://btcexpz7xlwrqknqw6p3bok6shf73qtkd6zxct4x4qta2ktvh7ntprad.onion&quot;); $(this).attr(&quot;title&quot;, &quot;Copied!&quot;).tooltip(&quot;_fixTitle&quot;).tooltip(&quot;show&quot;); $(this).mouseleave(function() { $(this).tooltip(&quot;hide&quot;); $(this).attr(&quot;data-bs-original-title&quot;, &quot;Copy&quot;); });"><i class="bi-clipboard2 text-info"></i></a></small><div class="mt-2"><a class="me-2" href="https://be.anyone.eu.org" title="Bitcoin" data-bs-toggle="tooltip"><img src="./img/network-mainnet/logo.svg?v=2023-06-14-1dbd3d8fc2" alt="Bitcoin" style="width: 40px; height: 40px;"></a><a class="me-2" href="https://testnet.bitcoinexplorer.org" title="Testnet" data-bs-toggle="tooltip"><img src="./img/network-testnet/logo.svg?v=2023-06-14-1dbd3d8fc2" alt="Testnet" style="width: 40px; height: 40px;"></a><a class="me-2" href="https://ex.signet.bublina.eu.org" title="Signet" data-bs-toggle="tooltip"><img src="./img/network-signet/logo.svg?v=2023-06-14-1dbd3d8fc2" alt="Signet" style="width: 40px; height: 40px;"></a></div></div></div></div><div class="col-lg-3"><div class="mb-4"><h6>Links</h6><div class="ms-2"><span style="font-size: 1.5rem;"><a class="text-white mb-1 me-3" href="https://github.com/janoside/btc-rpc-explorer" title="View source code" data-bs-toggle="tooltip"><i class="bi-git"></i></a><a class="text-danger mb-1 me-3" href="https://donate.bitcoinexplorer.org" target="_blank" title="Support this project with a donation" data-bs-toggle="tooltip"><i class="bi-heart-fill text-danger"></i></a><a class="text-white mb-1" href="https://twitter.com/BitcoinExplorer" target="_blank" title="Follow @BitcoinExplorer on Twitter" data-bs-toggle="tooltip"><i class="bi-twitter text-twitter"></i></a></span></div></div></div></div></div></footer><script src="./js/jquery.min.js?v=2023-06-14-1dbd3d8fc2" integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" crossorigin="anonymous"></script><script src="./js/bootstrap.bundle.min.js?v=2023-06-14-1dbd3d8fc2" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script><script src="./js/site.js?v=2023-06-14-1dbd3d8fc2" integrity="sha384-G8o2io5zIdQiiVN+4CAGGXPO4UvV8jGkSMlfddSPbqIUd3x5Rv01pNH6ec8QOATu" crossorigin="anonymous"></script><script>var serverTzOffset = "0";
var browserTzOffset = "0";
var currentBrowserTzOffset = (new Date().getTimezoneOffset() / 60).toString();
var userTzOffset = "unset";

document.addEventListener("DOMContentLoaded", function(event) {''
	enableTooltipsAndPopovers();

	onLoad_tabSelection();

	//console.log(Intl.DateTimeFormat().resolvedOptions().timeZone);
	console.log("Manual TZ Offset: " + userTzOffset);
	console.log("Browser TZ Offset: " + browserTzOffset);

	var displayTz = -1 * browserTzOffset;
	$("#browser-tz-offset").text(`${displayTz >= 0 ? "+" : ""}${displayTz} hr`);

	if (browserTzOffset != currentBrowserTzOffset) {
		browserTzOffset = currentBrowserTzOffset;

		$.get(`./changeSetting?name=browserTzOffset&value=${browserTzOffset}`, function(data) {
			console.log("Browser timezone saved.");

			if (userTzOffset == "unset") {
				$(".date-text").each((i, obj) => {
					var timestampUtc = $(obj).attr("data-timestamp-utc");
					var includeAgo = $(obj).attr("data-date-ago");
					var formatStr = $(obj).attr("data-date-format");
					if (formatStr) {
						formatStr = `&formatString=${formatStr}`;
					}
					
					$.get(`./snippet/timestamp?timestamp=${timestampUtc}&includeAgo=${includeAgo}${formatStr}`, function(data) {
						$(obj).html(data);

						enableTooltipsAndPopovers();
					});
				});
			}
		});
	}
});
</script><script src="./js/highlight.min.js?v=2023-06-14-1dbd3d8fc2" integrity="sha384-rRRl92dHoFEuEUzbuZbirpL4mXU9lEC7sdPaMYmayIbFSr+1K2FNOGzSSnocSNq+" crossorigin="anonymous"></script><script>document.addEventListener("DOMContentLoaded", function(event) {
	hljs.highlightAll();
});
</script><script src="./js/chart.min.js?v=2023-06-14-1dbd3d8fc2" integrity="sha384-9R67RXFKxJXd/+QmlkaEyOhcfa0gbkwDQ4LUr1RvuTZp9u4VDylkCdExAVOi6zqz" crossorigin="anonymous"></script><script>Chart.defaults.color='white';
var gridLineColor = "#1a4280";</script><script src="./js/decimal.js?v=2023-06-14-1dbd3d8fc2"></script><script>var currentBlockHeight = 820135;
$(document).ready(function() {
	$("#time-range-buttons .block-count-btn").on("click", function() {
		// highlight current selection
		$("#time-range-buttons .block-count-btn").removeClass("btn-primary").addClass("btn-outline-primary");
		$(this).addClass("btn-primary").removeClass("btn-outline-primary");
		$("#preconfigured-dropdown").removeClass("btn-primary").addClass("btn-outline-primary");
		
		var blockCount = parseInt($(this).attr("data-blockCount"));

		$("#data-progress").css("width", "0%");
		$("#block-progress-text").text("");

		$("#main-content").hide();
		$("#progress-wrapper").show();

		getData(currentBlockHeight, blockCount, 15);
	});

	$("#block-selections-buttons .dropdown-item").on("click", function() {
		// highlight current selection
		$("#time-range-buttons .block-count-btn").removeClass("btn-primary").addClass("btn-outline-primary");
		$("#preconfigured-dropdown").removeClass("btn-outline-primary").addClass("btn-primary");
		
		var blocks = $(this).attr("data-blocks");
		var bStartEnd = blocks.split("-");
		var bStart = parseInt(bStartEnd[0]);
		var bEnd = parseInt(bStartEnd[1]);

		$("#data-progress").css("width", "0%");
		$("#block-progress-text").text("");

		$("#main-content").hide();
		$("#progress-wrapper").show();

		getData(bEnd, bEnd - bStart + 1, 15);
	});

	$("#custom-range-form").on("submit", function() {
		// highlight current selection
		$("#time-range-buttons .block-count-btn").removeClass("btn-primary").addClass("btn-outline-primary");
		$("#preconfigured-dropdown").removeClass("btn-primary").addClass("btn-outline-primary");
		
		var bStart = parseInt($("#custom-range-start").val());
		var bEnd = parseInt($("#custom-range-end").val());

		$("#data-progress").css("width", "0%");
		$("#block-progress-text").text("");

		$("#main-content").hide();
		$("#progress-wrapper").show();

		getData(bEnd, bEnd - bStart + 1, 15);

		return false;
	});

	$(".graph-toggle-checkbox").change(function() {
		var graphId = $(this).attr("data-graphId");

		$("#graph-wrapper-" + graphId).toggle();
	});

	$("#link-show-all").on("click", function() {
		$(".graph-toggle-checkbox").each(function() {
			$(this).prop("checked", true);
		});

		$(".graph-wrapper").each(function() {
			$(this).show();
		});
	});

	$("#link-hide-all").on("click", function() {
		$(".graph-toggle-checkbox").each(function() {
			$(this).prop("checked", false);
		});

		$(".graph-wrapper").each(function() {
			$(this).hide();
		});
	});
});

function getData(blockStart, count, chunkSize) {
	$("#time-range-buttons .block-count-btn").addClass("disabled");
	$("#block-selections-buttons .dropdown-item").addClass("disabled");

	var chunks = [];
	var blockIndex = blockStart;
	while (blockIndex > blockStart - count) {
		var chunk = [];
		for (var i = blockIndex; (i > (blockIndex - chunkSize) && i > (blockStart - count)); i--) {
			chunk.push(i);
		}

		blockIndex -= chunkSize;
		chunks.push(chunk);
	}

	console.log(JSON.stringify(chunks));
	//alert(JSON.stringify(chunks));

	var results = [];

	var statusCallback = function(chunkIndexDone, chunkCount) {
		//console.log("Done: " + Math.min(((chunkIndexDone + 1) * chunkSize), count) + " of " + count);

		var wPercent = `${parseInt(100 * (chunkIndexDone + 1) / parseFloat(chunkCount))}%`;
		
		$("#data-progress").css("width", wPercent);
		$("#block-progress-text").text(`${Math.min(((chunkIndexDone + 1) * chunkSize), count).toLocaleString()} of ${count.toLocaleString()} (${wPercent})`);
	};

	var finishedCallback = function() {
		$("#time-range-buttons .block-count-btn").removeClass("disabled");
		$("#block-selections-buttons .dropdown-item").removeClass("disabled");

		var summary = summarizeData(results);

		var red = "#dc3545";
		var green = "#28a745";
		var blue = "#007bff";

		createGraph("fee-rates", ["avg-fee-rate", "median-fee-rate", "min-fee-rate"], [summary.avgfeerate, summary.medianfeerate, summary.minfeerate], [blue, red, green]);
		
		createGraph("max-fee-rates", ["max-fee-rate"], [summary.maxfeerate], [blue]);

		createGraph("total-fee", ["total-fee"], [summary.totalfee], [blue]);

		createGraph("min-fees", ["min-fee"], [summary.minfee], [blue]);
		createGraph("max-fees", ["max-fee"], [summary.maxfee], [blue]);

		createGraph("inputs-outputs", ["inputs", "outputs"], [summary.inputs, summary.outputs], [blue, green]);

		createGraph("tx-sizes", ["avg-tx-size", "median-tx-size", "min-tx-size"], [summary.avgtxsize, summary.mediantxsize, summary.mintxsize], [blue, red, green]);

		createGraph("max-tx-sizes", ["max-tx-size"], [summary.maxtxsize], [blue]);

		createGraph("volumes", ["volume"], [summary.totaloutput], [blue]);

		createGraph("weights-sizes", ["weight", "size"], [summary.weight, summary.size], [blue, green]);

		createGraph("sw-txs", ["swtxs"], [summary.swtxs], [blue]);

		createGraph("subsidy", ["subsidy"], [summary.subsidy], [blue], false);

		createGraph("mediantime", ["mediantime"], [summary.mediantime], [blue], false);

		createGraph("txs", ["txs"], [summary.txs], [blue]);

		createGraph("utxo_increase", ["utxo_increase"], [summary.utxo_increase], [blue], false);

		


		$("#main-content").show();
		$("#progress-wrapper").hide();
	};

	getBlockData(results, chunks, 0, statusCallback, finishedCallback);
}

function getBlockData(results, chunks, chunkIndex, statusCallback, finishedCallback) {
	if (chunkIndex > chunks.length - 1) {
		finishedCallback();

		return;
	}

	var url = `./internal-api/block-stats-by-height/${chunks[chunkIndex]}`;
	
	//console.log(url);

	$.ajax({
		url: url

	}).done(function(result) {
		for (var i = 0; i < result.length; i++) {
			results.push(result[i]);
		}

		statusCallback(chunkIndex, chunks.length);
		
		getBlockData(results, chunks, chunkIndex + 1, statusCallback, finishedCallback);
	});
}

function summarizeData(results) {
	var summary = {};

	summary.avgfeerate = [];
	summary.medianfeerate = [];
	summary.minfeerate = [];

	summary.maxfeerate = [];

	summary.totalfee = [];

	summary.minfee = [];
	summary.maxfee = [];

	summary.inputs = [];
	summary.outputs = [];

	summary.avgtxsize = [];
	summary.mediantxsize = [];
	summary.mintxsize = [];

	summary.maxtxsize = [];
	
	summary.totaloutput = [];

	summary.weight = [];
	summary.size = [];

	summary.swtxs = [];

	summary.subsidy = [];

	summary.mediantime = [];

	summary.txs = [];

	summary.utxo_increase = [];

	for (var i = results.length - 1; i >= 0; i--) {
		summary.avgfeerate.push({x:results[i].height, y:results[i].avgfeerate});
		summary.medianfeerate.push({x:results[i].height, y:results[i].feerate_percentiles[2]});
		summary.minfeerate.push({x:results[i].height, y:results[i].minfeerate});
		
		summary.maxfeerate.push({x:results[i].height, y:results[i].maxfeerate});

		summary.totalfee.push({x:results[i].height, y:new Decimal(results[i].totalfee).dividedBy(100000000)});
		
		summary.minfee.push({x:results[i].height, y:results[i].minfee});
		summary.maxfee.push({x:results[i].height, y:results[i].maxfee});
		
		summary.inputs.push({x:results[i].height, y:results[i].ins});
		summary.outputs.push({x:results[i].height, y:results[i].outs});
		
		summary.avgtxsize.push({x:results[i].height, y:results[i].avgtxsize});
		summary.mediantxsize.push({x:results[i].height, y:results[i].mediantxsize});
		summary.mintxsize.push({x:results[i].height, y:results[i].mintxsize});

		summary.maxtxsize.push({x:results[i].height, y:results[i].maxtxsize});
		
		summary.totaloutput.push({x:results[i].height, y:new Decimal(results[i].total_out).dividedBy(100000000)});
		
		summary.weight.push({x:results[i].height, y:results[i].total_weight});
		summary.size.push({x:results[i].height, y:results[i].total_size});
		
		summary.swtxs.push({x:results[i].height, y:results[i].swtxs});

		summary.subsidy.push({x:results[i].height, y:results[i].subsidy});

		summary.mediantime.push({x:results[i].height, y:results[i].mediantime});

		summary.txs.push({x:results[i].height, y:results[i].txs});

		summary.utxo_increase.push({x:results[i].height, y:results[i].utxo_increase});
	}

	return summary;
}

var graphsById = {};
function createGraph(chartid, names, datas, colors, logYAxis=true) {
	var datasets = [];
	var yaxes = [];

	for (var i = 0; i < names.length; i++) {
		datasets.push({
			label: names[i],
			data: datas[i],
			borderWidth: 2,
			borderColor: colors[i],
			backgroundColor: 'rgba(0, 0, 0, 0)',
			pointRadius: 1,
			borderJoinStyle: "round"
		});

		yaxes.push({
			scaleLabel: {
				display: false,
				//labelString: names[i]
			},
			grid: {
				color: gridLineColor
			},
		});
	}

	// update data in graph if we already created, otherwise create anew
	if (graphsById[chartid]) {
		graph = graphsById[chartid];
		graph.data = { datasets: datasets };
		graph.update();

	} else {
		var ctx = document.getElementById(chartid).getContext('2d');
		var graph = new Chart(ctx, {
			type: 'line',
			data: {
				datasets: datasets
			},
			options: {
				// disable all animations
				animation: false,

				interaction: {
					intersect: false,
					mode: 'index',
				},

				plugins: {
					legend: {
						display: (datasets.length > 1)
					},
				},
				scales: {
					x: {
						type: 'linear',
						position: 'bottom',
						scaleLabel: {
							display: true,
							labelString: 'Block'
						},
						grid: {
							color: gridLineColor
						},
					},
					y: {
						type: logYAxis ? "logarithmic" : "linear",
						position: 'left',
						scaleLabel: {
							display: false,
						},
						grid: {
							color: gridLineColor
						},
					},
				}
			}
		});

		graphsById[chartid] = graph;
	}
}
</script><script>$(document).ready(function() {
	getData(currentBlockHeight, 144, 15);
});</script></body></html>